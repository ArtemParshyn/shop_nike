define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,r){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[70368],{87923:function(e,t,n){"use strict";var r=n(89575),a=n(17502),l=n(85959),o=n(23215),i=n(71156),c=n(54987),s=n(32501);const d=["linkStyle"],u=l.forwardRef(((e,t)=>{let{linkStyle:n}=e,u=(0,a.A)(e,d);switch(n){case"navigational":return l.createElement(c.q,(0,r.A)({},u,{forwardedRef:t}));case"navigational-sale":return l.createElement(s.T,(0,r.A)({},u,{forwardedRef:t}));case"icon":return l.createElement(i.g,(0,r.A)({},u,{forwardedRef:t}));default:return l.createElement(o.Y,(0,r.A)({},u,{forwardedRef:t}))}}));t.A=u},38608:function(e,t,n){"use strict";var r;n.d(t,{b:function(){return r}}),function(e){e.OPT_IN="/plus/consent",e.RELEASE_RADAR="/plus/release-radar"}(r||(r={}))},53173:function(e,t,n){"use strict";n.d(t,{j:function(){return b}});var r=n(85959),a=n(30812),l=n(5073),o=n(51599),i=n(10170),c=n(38856),s=n(2673),d=n(52130),u=n(52517);const m={day:"numeric",month:"long",year:"numeric"},E={hour:"numeric",minute:"numeric",hour12:!1},v=(e,t,n)=>{const r=/\[(.*?)\]/g;let a=r.exec(e);const l=new Array;for(;null!=a;)l.push({exactMatch:a[0]||"",placeholder:a[1]||"",index:a.index}),a=r.exec(e);if(0===l.length)return;const o=l.find((e=>e.placeholder.toLowerCase()==="Date".toLowerCase()));if(!o)return;e=e.replace(o.exactMatch,t.date);const i=l.find((e=>e.placeholder.toLowerCase()==="Time".toLowerCase()));return i&&(e=e.replace(i.exactMatch,null!=n?n:t.time)),e};var y=e=>{let{text:t,releaseDate:n}=e;const[a,l]=r.useState(v(t,n,""));return r.useEffect((()=>{l(v(t,n))}),[]),r.createElement("span",null,a)};var f=e=>{let{text:t,releaseDate:n}=e;const a=n&&r.createElement(y,{text:t,releaseDate:n});return r.createElement(s.Ay,{preset:d.nx.body,color:d.r7.primary,font:d.KQ.serif},a||t)},p=n(42768),g=n(85202),x=n(73127);var A=e=>{let{cta:t,ctaType:n,onClick:a}=e;const l=()=>{a(),t.uri&&(window.location.href=t.uri)};return t.text?"PRIMARY"===n?r.createElement(g.j,{className:p.$3,label:t.text,onClick:l}):r.createElement(x.t,{className:p.$3,label:t.text,onClick:l}):null},T=n(55124),h=n(36124),N=n(87923),_=n(96545);var L=e=>{let{cta:t,onClick:n,tools:a}=e;return t.text?r.createElement(s.Ay,{preset:d.nx.bodySmallBold},r.createElement(N.A,{size:_.s.medium,linkStyle:"navigational",onClick:()=>{n(),a.customer.performLogin({})},style:{cursor:"pointer"}},t.text)," ",r.createElement(h.A,{src:T.A,fontSize:"custom"})):null};var b=e=>{let{title:t,header:n,releaseDate:v,locale:y,description:p,cta:g,ctaType:x,footer:T,showFooterCta:h,onCtaClick:N,onFooterCtaClick:_,tools:b}=e;var C,S,k;const O=void 0!==v?((e,t)=>{if(!e)return;const n=new Date(e);return{date:n.toLocaleString(t,m),divider:"@",time:n.toLocaleString(t,E).toLocaleLowerCase(t)}})(v,y):void 0;return r.createElement("div",{className:a(l.OL,o.F9z,i.cgu,c.vF)},n&&r.createElement("div",{className:a(l.OL,c.Fn)},(null==n?void 0:n.logo)&&r.createElement(u.Ay,{src:null==n||null==(C=n.logo)?void 0:C.uri,width:null==n||null==(S=n.logo)?void 0:S.width,className:i.HaJ}),r.createElement(s.Ay,{preset:d.nx.bodyLarge,tag:"h2"},n.label)),r.createElement("div",{className:a(i.aUF)},r.createElement(s.Ay,{preset:d.nx.bodyBold,tag:"p"},t)),p&&r.createElement("div",{className:a(i.E0r)},r.createElement(f,{text:p,releaseDate:O})),g&&r.createElement("div",{className:a(i.aUF)},r.createElement(A,{ctaType:x,cta:g,onClick:N})),h&&(null==T||null==(k=T.cta)?void 0:k.uri)&&r.createElement("div",{className:a(i.aUF)},r.createElement(s.Ay,{preset:d.nx.bodySmall},T.text),"Â ",T.cta&&r.createElement(L,{cta:T.cta,onClick:_,tools:b})))}},75105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var r,a,l=n(85959),o=n(29443),i=n(11506),c=n(32740),s=n(10170),d=n(53173),u=n(89862);!function(e){e.PDP_TRACKING_CATEGORY="product detail page",e.LOYALTY_EVENT_TRIGGER_NAME="loyalty_opt_in_placement.priority_access",e.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME="loyalty_bonus_points_banner"}(r||(r={})),function(e){e.VIEW_CONTENT="view_content",e.SELECT_CONTENT="select_content"}(a||(a={}));const m=(e,t,n)=>({content_id:e,legacy_event_name:t,event_trigger_name:n}),E=(e,t,n)=>{e.track({name:u.bD,context:{customCategory:r.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:t+".cta."+n}})};var v=e=>{let{banner:t,inStock:n,locale:r,tools:a}=e;const{releaseDate:o,header:i,footer:c,description:s,cta:u,title:m}=(e=>{var t,n,r,a,l,o,i,c,s,d;return{header:{label:(null==e||null==(t=e.header)?void 0:t.label)?e.header.label:void 0,logo:{width:(null==e||null==(r=e.header)||null==(n=r.logo)?void 0:n.width)?e.header.logo.width:void 0,uri:(null==e||null==(l=e.header)||null==(a=l.logo)?void 0:a.uri)?e.header.logo.uri:void 0}},title:null!=(c=e.title)?c:void 0,releaseDate:null!=(s=e.releaseDate)?s:void 0,description:null!=(d=e.description)?d:void 0,cta:(null==e?void 0:e.cta)?{text:e.cta.text,uri:e.cta.uri}:void 0,footer:{text:(null==e||null==(o=e.footer)?void 0:o.text)?e.footer.text:void 0,cta:(null==e||null==(i=e.footer)?void 0:i.cta)?{text:e.footer.cta.text,uri:e.footer.cta.uri}:void 0}}})(t),[v,y]=l.useState(u);l.useEffect((()=>{v&&y({...v,uri:v.uri.replace(/\/+$/,"")+"/?redirect_url="+encodeURIComponent(window.location.href)})}),[]);const f=n?"PRIMARY":"SECONDARY";return l.createElement(d.j,{header:i,title:m,locale:r,releaseDate:o,footer:c,description:s,cta:v,onCtaClick:()=>{E(a.tracking,t.id,"button")},onFooterCtaClick:()=>{E(a.tracking,t.id,"link")},ctaType:f,showFooterCta:!0,tools:a})},y=n(30812),f=n(51599),p=n(5073),g=n(38856),x=n(2673),A=n(52130),T=n(15184),h=n(22837),N=n(13185);const _={hour:"numeric",minute:"numeric",hour12:!1},L={dateFormatOptions:{day:"numeric",month:"long",year:"numeric"},dateTimeDivider:" @ ",timeFormatOptions:_},b={...L,dateTimeDivider:" um "},C={...L},S={...L,dateTimeDivider:" alle "},k={"de-DE":b,"en-GB":{...L,timeFormatOptions:{..._,hour12:void 0,hourCycle:"h12"}},"fr-FR":C,"nl-NL":{...L},"it-IT":S,"de-CH":b,"fr-CH":C,"it-CH":S,"de-AT":b},O=(e,t)=>{if(!e)return null;const n=new Date(e);var r;const{dateFormatOptions:a,dateTimeDivider:l,timeFormatOptions:o}=null!=(r=k[t])?r:L;return{date:n.toLocaleString(t,a),divider:l,time:n.toLocaleString(t,o).toLocaleLowerCase(t)}},P=e=>{var t;const n=null==(t=e.split("?"))?void 0:t[1];return new URLSearchParams(n).get("context")};var R=e=>{let{locale:t,banner:n,isDesignerExperience:r}=e;const a=null==n?void 0:n.title,o=null==n?void 0:n.description,i=O(null==n?void 0:n.releaseDate,t);return l.createElement(T.Sv,{colorScheme:h.z.monochromeLight},l.createElement("div",{className:y(p.OL,s.cgu,g.vF,f.JSK)},l.createElement("div",{className:y(p.OL,g.Fn)},l.createElement(N.A,{logo:"LoyaltyPoints",size:"s",isDarkMode:!1})),a&&l.createElement("div",{className:y(s.aUF,s.Cou)},l.createElement(x.Ay,{preset:r?A.nx.h4:A.nx.bodyLargeBold,tag:"p"},a)),o&&l.createElement(x.Ay,{preset:A.nx.body},o),i&&l.createElement(x.Ay,{preset:A.nx.bodyBold},(null==i?void 0:i.date)+" "+(null==i?void 0:i.divider)+" "+(null==i?void 0:i.time))))},w=n(21775),D=n(71016),I=n(42768),F=n(85202),Y=n(87923),G=n(96545),B=n(36124),U=n(41825),M=n(3090),z=n(38608),V=n(55124);var K=e=>{let{locale:t,banner:n,loyaltyPointsProgram:o,isDesignerExperience:i,tracking:c,entityId:d}=e;const{header:E,title:v,description:N,cta:_,footer:L}=n,{icon:b,tier:C}=null!=o?o:{},S=O(null==n?void 0:n.releaseDate,t),k=i?[U.FQ,U.Ae,U.Nd,U.s7,U.$A,U.e6,U.b_,U.Ku]:[],R=()=>{(null==_?void 0:_.uri)&&(_.uri.startsWith(z.b.OPT_IN)?(((e,t)=>{const n={name:a.SELECT_CONTENT,context:m(t,u.bD,r.LOYALTY_EVENT_TRIGGER_NAME)};e.trackStandalone(n)})(c,d),w.trigger(M.x.OPEN,{context:P(_.uri)})):window.location.href=_.uri)};var K;return l.createElement(T.Sv,{colorScheme:i?h.z.monochromeLight:h.z.monochromeDark},l.createElement("div",{className:y(p.OL,s.cgu,g.vF,f.GUV,...k)},E?l.createElement("div",{className:y(p.OL,g.Fn)},l.createElement(D.A,{logo:"LoyaltyPointsTile",logoLabel:null==C?void 0:C.name,icon:b,size:"s",label:null!=(K=E.label)?K:"",isDarkMode:!i})):null,v?l.createElement("div",{className:s.aUF},l.createElement(x.Ay,{preset:A.nx.bodyBold,tag:"p"},v)):null,N?l.createElement("div",{className:s.E0r},l.createElement(x.Ay,{preset:A.nx.body},N)):null,S?l.createElement(x.Ay,{preset:A.nx.bodyBold},(null==S?void 0:S.date)+" "+(null==S?void 0:S.divider)+" "+(null==S?void 0:S.time)):null,_?l.createElement("div",{className:y(s.aUF)},l.createElement(F.j,{className:y(I.$3),label:_.text,onClick:R})):null,L?l.createElement("div",{className:s.aUF},l.createElement(x.Ay,{preset:A.nx.bodySmall},L.text),L.cta?l.createElement(l.Fragment,null,l.createElement(Y.A,{size:G.s.medium,linkStyle:"navigational",onClick:R,style:{cursor:"pointer"}},L.cta.text)," ",l.createElement(B.A,{src:V.A,fontSize:"custom"})):null):null))},q=n(20950),W=n.n(q),$=(0,c.tile)().withQueries((e=>{let{entity:t,ruleData:n}=e;return{data:{query:W(),variables:{id:t.id,input:{afterInviteRequest:Boolean(n.afterInviteRequest)}}}}})).withTracking((e=>({def:o.def,context:{id:e.entity.id}}))).withProcessDependencies((e=>{if(!e||!e.data)return{action:"error",message:"Invalid product"};const{product:t,loyaltyPointsProgram:n}=e.data;return t?{action:"render",data:{product:t,loyaltyPointsProgram:n}}:{action:"error",message:"Invalid product"}})).withRender((e=>{let{context:{experience:t,locale:n},data:o,entity:d,tools:E}=e;const{product:y,loyaltyPointsProgram:f}=o,{segmentCommunication:p,inStock:g}=y;if(!p)return null;const x=["LOYALTY_POINTS_EARLY_ACCESS","LOYALTY_POINTS_PRIORITY_ACCESS"].includes(null==p?void 0:p.kind),A="LOYALTY_POINTS_BONUS_POINTS"===(null==p?void 0:p.kind),{experienceName:T}=(0,i.q)(t),h=T.isDesigner(),N=d.id;return l.createElement(c.ViewTracker,{onVisible:()=>(e=>{let{tracking:t,bannerId:n,entityId:l,isLoyaltyPointsBanner:o,isLoyaltyPointsBonusPointsBanner:i}=e,c="";o?c=r.LOYALTY_EVENT_TRIGGER_NAME:i&&(c=r.LOYALTY_EVENT_BONUS_POINTS_TRIGGER_NAME);const s={name:a.VIEW_CONTENT,context:m(l,u.wc,c)};t.trackStandalone(s),t.track({name:u.wc,context:{customCategory:r.PDP_TRACKING_CATEGORY,customActionSuffix:"banner",customLabel:n}})})({tracking:null==E?void 0:E.tracking,bannerId:null==p?void 0:p.id,entityId:N,isLoyaltyPointsBanner:x,isLoyaltyPointsBonusPointsBanner:A})},l.createElement("div",{className:s.hkP},x?l.createElement(K,{locale:n,banner:p,loyaltyPointsProgram:f,isDesignerExperience:h,tracking:E.tracking,entityId:N}):A?l.createElement(R,{locale:n,banner:p,isDesignerExperience:h}):l.createElement(v,{banner:p,inStock:g,locale:n,tools:E})))}))},20950:function(e){e.exports={id:"3f3a0a981b3cf155580ae65092b92fc81d21714b7bf0a74e26b34944725b82c5"}},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=r}},function(e){return e.O(0,[29674],(function(){return t=75105,e(e.s=t);var t})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/product_segmented-banner/index-09f007fae22b7f983384.map